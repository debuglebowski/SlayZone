---
phase: 12-settings-redesign
plan: 02
type: execute
wave: 2
depends_on: ["12-01"]
files_modified:
  - src/renderer/src/components/dialogs/UserSettingsDialog.tsx
autonomous: true

must_haves:
  truths:
    - "Settings dialog has tabbed layout (General, Tags, About)"
    - "Theme setting visible in General tab"
    - "Tag management visible in Tags tab"
    - "Database path visible in About tab"
    - "Claude Code CLI status visible in About tab"
  artifacts:
    - path: "src/renderer/src/components/dialogs/UserSettingsDialog.tsx"
      provides: "Tabbed settings with Claude status"
      contains: "TabsContent"
      min_lines: 100
  key_links:
    - from: "UserSettingsDialog.tsx"
      to: "window.api.claude.checkAvailability"
      via: "useEffect on open"
      pattern: "checkAvailability"
---

<objective>
Refactor UserSettingsDialog to use tabbed layout with Claude Code status display.

Purpose: Professional settings UI that organizes settings logically and shows CLI availability.
Output: Polished tabbed dialog with General, Tags, About sections.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/12-settings-redesign/12-RESEARCH.md
@.planning/phases/12-settings-redesign/12-01-SUMMARY.md

@src/renderer/src/components/dialogs/UserSettingsDialog.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Refactor Settings dialog with tabs and Claude status</name>
  <files>src/renderer/src/components/dialogs/UserSettingsDialog.tsx</files>
  <action>
Refactor UserSettingsDialog to use tabbed layout:

1. **Imports:**
   - Add `Tabs, TabsContent, TabsList, TabsTrigger` from `@/components/ui/tabs`
   - Add `Skeleton` from `@/components/ui/skeleton` (for loading state)
   - Import `ClaudeAvailability` type from shared types

2. **State:**
   - Add `claudeStatus: ClaudeAvailability | null` state (starts null)

3. **useEffect:**
   - On dialog open, also call `window.api.claude.checkAvailability().then(setClaudeStatus)`

4. **Dialog width:**
   - Change `max-w-lg` to `max-w-xl` for more room

5. **Structure:**
```tsx
<Tabs defaultValue="general" className="w-full">
  <TabsList className="grid w-full grid-cols-3">
    <TabsTrigger value="general">General</TabsTrigger>
    <TabsTrigger value="tags">Tags</TabsTrigger>
    <TabsTrigger value="about">About</TabsTrigger>
  </TabsList>

  <TabsContent value="general" className="space-y-4 pt-4">
    {/* Theme section - move existing appearance code here */}
  </TabsContent>

  <TabsContent value="tags" className="space-y-4 pt-4">
    {/* Tags section - move existing tags code here */}
  </TabsContent>

  <TabsContent value="about" className="space-y-4 pt-4">
    {/* Database path - move existing db section */}
    {/* Claude Code status - NEW */}
  </TabsContent>
</Tabs>
```

6. **Claude status display in About tab:**
```tsx
<div className="space-y-2">
  <Label className="text-base font-semibold">Claude Code</Label>
  {claudeStatus === null ? (
    <Skeleton className="h-4 w-40" />
  ) : claudeStatus.available ? (
    <div className="flex items-center gap-2">
      <div className="size-2 rounded-full bg-green-500" />
      <span className="text-sm">{claudeStatus.version}</span>
    </div>
  ) : (
    <div className="flex items-center gap-2">
      <div className="size-2 rounded-full bg-red-500" />
      <span className="text-sm text-muted-foreground">Not installed</span>
    </div>
  )}
</div>
```

7. **Remove Separator components** - tabs provide visual separation.

Keep all existing tag CRUD functionality intact, just reorganize into tabs.
  </action>
  <verify>
- `npm run typecheck` passes
- Open Settings dialog, verify 3 tabs visible
- General tab shows theme select
- Tags tab shows tag list and create form
- About tab shows database path and Claude status
  </verify>
  <done>
Settings dialog has 3 tabs (General, Tags, About), Claude status shows green dot + version or red dot + "Not installed"
  </done>
</task>

</tasks>

<verification>
- `npm run typecheck` passes
- Settings dialog opens with tabbed layout
- All 3 tabs functional (General, Tags, About)
- Claude status displays availability with colored indicator
- Existing tag functionality preserved
</verification>

<success_criteria>
- SET-01: Settings UI professionally redesigned with tabs
- SET-02: Claude Code CLI availability status displayed in About tab
</success_criteria>

<output>
After completion, create `.planning/phases/12-settings-redesign/12-02-SUMMARY.md`
</output>
