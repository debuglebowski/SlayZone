---
phase: 07-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/renderer/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "Pressing 'n' opens new task dialog from kanban view"
    - "Pressing 'n' while typing in input does NOT trigger dialog"
    - "Pressing 'esc' navigates back from task-detail to kanban"
    - "Pressing 'esc' navigates back from work-mode to task-detail"
  artifacts:
    - path: "package.json"
      provides: "react-hotkeys-hook dependency"
      contains: "react-hotkeys-hook"
    - path: "src/renderer/src/App.tsx"
      provides: "Global keyboard shortcut handlers"
      contains: "useHotkeys"
  key_links:
    - from: "App.tsx useHotkeys('n')"
      to: "setCreateOpen(true)"
      via: "hotkey callback"
      pattern: "useHotkeys.*n.*setCreateOpen"
    - from: "App.tsx useHotkeys('escape')"
      to: "closeTaskDetail/closeWorkMode"
      via: "hotkey callback"
      pattern: "useHotkeys.*escape"
---

<objective>
Add global keyboard shortcuts

Purpose: Complete UX-02 - power user navigation with keyboard
Output: "n" opens new task, "esc" navigates back
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-polish/07-RESEARCH.md
@src/renderer/src/App.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install react-hotkeys-hook</name>
  <files>package.json</files>
  <action>
Run: `npm install react-hotkeys-hook`

This library provides declarative keyboard shortcuts with automatic input focus filtering.
  </action>
  <verify>`npm ls react-hotkeys-hook` shows installed version</verify>
  <done>react-hotkeys-hook in dependencies</done>
</task>

<task type="auto">
  <name>Task 2: Add keyboard shortcuts to App.tsx</name>
  <files>src/renderer/src/App.tsx</files>
  <action>
Add two global keyboard shortcuts using react-hotkeys-hook:

1. Import: `import { useHotkeys } from 'react-hotkeys-hook'`

2. Add "n" shortcut for new task (inside App component, after state declarations):
```typescript
// "n" opens new task dialog (only from kanban view, when no dialog open)
useHotkeys('n', () => {
  if (projects.length > 0 && view.type === 'kanban') {
    setCreateOpen(true)
  }
}, { enableOnFormTags: false })
```

3. Add "esc" shortcut for navigation back:
```typescript
// "esc" navigates back (Radix handles dialog closing)
useHotkeys('escape', () => {
  // Skip if any dialog is open - Radix handles those
  if (createOpen || editingTask || deletingTask) return
  if (createProjectOpen || editingProject || deletingProject) return
  if (settingsOpen) return

  // Navigate back
  if (view.type === 'work-mode') closeWorkMode()
  else if (view.type === 'task-detail') closeTaskDetail()
}, { enableOnFormTags: false })
```

IMPORTANT: Use `enableOnFormTags: false` to prevent shortcuts triggering while typing in inputs.
  </action>
  <verify>
1. Open app, press "n" -> CreateTaskDialog opens
2. Press "esc" -> dialog closes (Radix handles)
3. Open task detail, press "esc" -> returns to kanban
4. Type in search/input, press "n" -> should NOT open dialog
  </verify>
  <done>Keyboard shortcuts work: n=new task, esc=back</done>
</task>

</tasks>

<verification>
- [ ] `npm run typecheck` passes
- [ ] "n" from kanban opens CreateTaskDialog
- [ ] "n" while typing does nothing
- [ ] "esc" from task-detail returns to kanban
- [ ] "esc" from work-mode returns to task-detail
- [ ] Dialog "esc" still closes dialog (Radix default)
</verification>

<success_criteria>
Keyboard shortcuts work without interfering with typing or dialog behavior.
</success_criteria>

<output>
After completion, create `.planning/phases/07-polish/07-02-SUMMARY.md`
</output>
