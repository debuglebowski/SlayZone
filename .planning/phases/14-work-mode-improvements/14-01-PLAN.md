---
phase: 14-work-mode-improvements
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/renderer/src/components/work-mode/WorkModePage.tsx
  - src/renderer/src/components/work-mode/EmptyWorkspaceState.tsx
autonomous: true

must_haves:
  truths:
    - "Empty state shows 3 large workspace options (Chat, Browser, Document)"
    - "Empty state hides workspace panel entirely"
    - "Task title displayed in sidebar header"
    - "Sidebar is w-80 (320px) wide"
    - "Exit button is subtle X icon in sidebar top-right"
  artifacts:
    - path: "src/renderer/src/components/work-mode/WorkModePage.tsx"
      provides: "Restructured layout without header"
      contains: "w-80"
    - path: "src/renderer/src/components/work-mode/EmptyWorkspaceState.tsx"
      provides: "Empty state with 3 action buttons"
      exports: ["EmptyWorkspaceState"]
  key_links:
    - from: "WorkModePage.tsx"
      to: "EmptyWorkspaceState.tsx"
      via: "import and conditional render"
      pattern: "items\\.length === 0.*EmptyWorkspaceState"
---

<objective>
Restructure Work Mode layout: move title to sidebar, widen sidebar, add subtle exit, create prominent empty state.

Purpose: Improve Work Mode UX per requirements WORK-01 through WORK-05
Output: Cleaner layout with better empty state onboarding
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14-work-mode-improvements/14-RESEARCH.md
@src/renderer/src/components/work-mode/WorkModePage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create EmptyWorkspaceState component</name>
  <files>src/renderer/src/components/work-mode/EmptyWorkspaceState.tsx</files>
  <action>
Create new component with 3 large action buttons for Chat/Browser/Document.

Structure:
- Props: `onAddItem: (type: WorkspaceItemType) => void`
- Layout: flex-1 centered, flex row with gap-6
- Each button: flex-col, p-6, rounded-lg, border-2 border-dashed, hover states
- Icons: MessageSquare (Chat), Globe (Browser), FileText (Document) at h-8 w-8
- Labels: Type name + short description underneath

Use existing patterns from research:
```tsx
<button
  onClick={() => onAddItem(type)}
  className="flex flex-col items-center gap-3 p-6 rounded-lg border-2 border-dashed
             hover:border-primary hover:bg-muted/50 transition-colors w-32"
>
  <Icon className="h-8 w-8 text-muted-foreground" />
  <div className="text-center">
    <div className="font-medium">{label}</div>
    <div className="text-xs text-muted-foreground">{desc}</div>
  </div>
</button>
```
  </action>
  <verify>File exists, exports EmptyWorkspaceState, TypeScript compiles</verify>
  <done>Component renders 3 clickable workspace option buttons</done>
</task>

<task type="auto">
  <name>Task 2: Restructure WorkModePage layout</name>
  <files>src/renderer/src/components/work-mode/WorkModePage.tsx</files>
  <action>
Remove header entirely. Restructure to sidebar-first layout.

Changes:
1. Remove the `<header>` element completely
2. Change outer div from `flex flex-col` to just `flex`
3. Widen sidebar: `w-64` -> `w-80`
4. Add sidebar header section with:
   - Task title (truncate, text-lg font-semibold)
   - Exit button: ghost variant, size="icon", h-7 w-7, X icon, text-muted-foreground
   - Layout: flex items-center justify-between p-4 border-b
5. Import X from lucide-react
6. Import EmptyWorkspaceState from ./EmptyWorkspaceState
7. Change main content rendering:
   - If items.length === 0: render `<EmptyWorkspaceState onAddItem={handleAddItem} />`
   - If items.length > 0 but no activeItem: show "Select an item" text
   - If activeItem: render the appropriate content (unchanged logic)

Target structure:
```tsx
<div className="flex h-screen">
  <aside className="w-80 border-r flex flex-col">
    {/* Title + Exit */}
    <div className="flex items-center justify-between p-4 border-b">
      <h1 className="text-lg font-semibold truncate pr-2">{task.title}</h1>
      <Button variant="ghost" size="icon" className="h-7 w-7 shrink-0 text-muted-foreground" onClick={onBack}>
        <X className="h-4 w-4" />
      </Button>
    </div>
    {/* Workspace controls - existing */}
    {/* Item list - existing */}
  </aside>

  {items.length === 0 ? (
    <EmptyWorkspaceState onAddItem={handleAddItem} />
  ) : !activeItem ? (
    <div className="flex-1 flex items-center justify-center text-muted-foreground">
      Select an item to get started
    </div>
  ) : (
    <main className="flex-1 min-h-0">
      {/* existing content rendering */}
    </main>
  )}
</div>
```
  </action>
  <verify>npm run typecheck passes, app renders Work Mode without header</verify>
  <done>Work Mode has wider sidebar with title+exit, no header, empty state shows 3 options</done>
</task>

</tasks>

<verification>
1. `npm run typecheck` - no errors
2. Open Work Mode on task with no workspace items - see 3 large buttons
3. Click any button - item created and becomes active
4. Task title visible in sidebar top-left
5. Exit button (X) visible in sidebar top-right, clicking exits Work Mode
6. Sidebar visually wider than before
</verification>

<success_criteria>
- WORK-01: Empty state shows Chat/Browser/Document buttons
- WORK-02: Empty state has no blank workspace panel
- WORK-03: Task title in sidebar header
- WORK-04: Sidebar w-80 (320px)
- WORK-05: Exit is subtle X icon top-right of sidebar
</success_criteria>

<output>
After completion, create `.planning/phases/14-work-mode-improvements/14-01-SUMMARY.md`
</output>
