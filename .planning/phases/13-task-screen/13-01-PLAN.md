---
phase: 13-task-screen
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/renderer/src/components/task-detail/TaskDetailPage.tsx
  - src/renderer/src/components/task-detail/TaskMetadataSidebar.tsx
autonomous: true

must_haves:
  truths:
    - "Task screen uses narrow content area with sidebar on right"
    - "Header has no visible border"
    - "Metadata (status, priority, due, tags, blocked) displayed vertically in sidebar"
  artifacts:
    - path: "src/renderer/src/components/task-detail/TaskMetadataSidebar.tsx"
      provides: "Vertical metadata layout component"
      min_lines: 100
    - path: "src/renderer/src/components/task-detail/TaskDetailPage.tsx"
      provides: "Two-column layout with sidebar"
      contains: "TaskMetadataSidebar"
  key_links:
    - from: "TaskDetailPage.tsx"
      to: "TaskMetadataSidebar.tsx"
      via: "import and render"
      pattern: "TaskMetadataSidebar"
---

<objective>
Restructure task detail page: remove header border, convert horizontal metadata row to vertical sidebar.

Purpose: Clean layout matching modern task management UIs
Output: Two-column task detail page with metadata sidebar
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/13-task-screen/13-RESEARCH.md
@src/renderer/src/components/task-detail/TaskDetailPage.tsx
@src/renderer/src/components/task-detail/TaskMetadataRow.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TaskMetadataSidebar component</name>
  <files>src/renderer/src/components/task-detail/TaskMetadataSidebar.tsx</files>
  <action>
Create new component by extracting logic from TaskMetadataRow.tsx, converting to vertical layout:

1. Same props interface as TaskMetadataRow (task, tags, taskTagIds, onUpdate, onTagsChange)
2. Use vertical `space-y-4` layout instead of horizontal flex-wrap
3. Each field gets its own block with label above control:
   - Status: label + Select (full width)
   - Priority: label + Select (full width)
   - Due Date: label + Calendar popover button (full width)
   - Tags: label + Popover button showing selected tags
   - Blocked: Checkbox + label + conditional reason input (stacked)
4. Remove bottom border (horizontal row had `border-b`)
5. Keep all handler logic identical to TaskMetadataRow
  </action>
  <verify>File exists with all 5 metadata fields in vertical layout</verify>
  <done>TaskMetadataSidebar renders status, priority, due, tags, blocked vertically</done>
</task>

<task type="auto">
  <name>Task 2: Update TaskDetailPage layout</name>
  <files>src/renderer/src/components/task-detail/TaskDetailPage.tsx</files>
  <action>
1. Remove `border-b` from header className (line ~152)
2. Replace single-column main with two-column flex layout:
   - Outer container: `mx-auto max-w-5xl p-6`
   - Inner flex: `flex gap-8`
   - Main content: `flex-1 min-w-0 max-w-2xl` (description + subtasks)
   - Sidebar: `w-64 shrink-0` (metadata sidebar)
3. Replace TaskMetadataRow import with TaskMetadataSidebar
4. Move metadata from before description to sidebar position
5. Remove border-t from subtasks section (no longer needed with sidebar layout)
  </action>
  <verify>`npm run typecheck` passes, visual inspection shows two-column layout</verify>
  <done>Task detail page has no header border, content on left, metadata sidebar on right</done>
</task>

</tasks>

<verification>
- `npm run typecheck` passes
- Task detail page shows header without border
- Metadata displayed in right sidebar with vertical layout
- Main content area (description, subtasks) narrower than before
- All metadata controls functional (status, priority, due, tags, blocked)
</verification>

<success_criteria>
- TASK-01: Narrow consistent width (main content max-w-2xl)
- TASK-02: Header has no border
- TASK-03: Metadata sidebar on right side
</success_criteria>

<output>
After completion, create `.planning/phases/13-task-screen/13-01-SUMMARY.md`
</output>
