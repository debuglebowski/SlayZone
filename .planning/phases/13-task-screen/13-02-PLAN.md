---
phase: 13-task-screen
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/renderer/src/components/task-detail/SubtaskAccordion.tsx
  - src/renderer/src/components/task-detail/SubtaskItem.tsx
autonomous: true

must_haves:
  truths:
    - "Clicking subtask title navigates to subtask detail page"
    - "Subtasks section collapsed by default when page loads"
  artifacts:
    - path: "src/renderer/src/components/task-detail/SubtaskAccordion.tsx"
      provides: "Collapsed default, navigation callback"
      contains: "onNavigate"
    - path: "src/renderer/src/components/task-detail/SubtaskItem.tsx"
      provides: "Clickable subtask row"
      contains: "onNavigate"
  key_links:
    - from: "SubtaskItem.tsx"
      to: "onNavigate prop"
      via: "click handler"
      pattern: "onNavigate.*subtask.id"
    - from: "SubtaskAccordion.tsx"
      to: "SubtaskItem"
      via: "onNavigate prop drilling"
      pattern: "onNavigate=\\{onNavigate\\}"
---

<objective>
Make subtasks navigable and collapsed by default.

Purpose: Enable drilling into subtask details, reduce initial visual clutter
Output: Clickable subtasks that navigate, collapsed accordion on load
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/13-task-screen/13-RESEARCH.md
@src/renderer/src/components/task-detail/SubtaskAccordion.tsx
@src/renderer/src/components/task-detail/SubtaskItem.tsx
@src/renderer/src/components/task-detail/TaskDetailPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add navigation to SubtaskItem</name>
  <files>src/renderer/src/components/task-detail/SubtaskItem.tsx</files>
  <action>
1. Add `onNavigate: (subtaskId: string) => void` to SubtaskItemProps interface
2. Make the subtask title clickable for navigation (not edit):
   - Wrap title span in clickable div with `onClick={() => onNavigate(subtask.id)}`
   - Add hover styles: `cursor-pointer hover:bg-muted/50 rounded px-2 py-1`
3. Move inline edit trigger to double-click OR add small edit icon button:
   - Recommended: Add pencil icon button (visible on hover like delete button)
   - `onClick={(e) => { e.stopPropagation(); setEditing(true) }}`
4. Checkbox click should NOT trigger navigation (stopPropagation already handled by Checkbox)
  </action>
  <verify>Subtask title click triggers onNavigate callback, checkbox still toggles status</verify>
  <done>SubtaskItem has onNavigate prop, title click navigates, edit via icon</done>
</task>

<task type="auto">
  <name>Task 2: Wire navigation and collapse in SubtaskAccordion</name>
  <files>src/renderer/src/components/task-detail/SubtaskAccordion.tsx</files>
  <action>
1. Add `onNavigate: (subtaskId: string) => void` to SubtaskAccordionProps
2. Pass onNavigate to each SubtaskItem
3. Remove auto-expand logic:
   - Line ~29: Remove `setExpanded(loaded.length > 0)` from useEffect
   - Keep `useState(false)` as default
4. Remove auto-expand when adding subtask:
   - Line ~47: Remove `setExpanded(true)` from handleAddSubtask
  </action>
  <verify>Accordion stays collapsed on load, onNavigate passed to SubtaskItem</verify>
  <done>Subtasks collapsed by default, navigation wired through</done>
</task>

<task type="auto">
  <name>Task 3: Connect navigation in TaskDetailPage</name>
  <files>src/renderer/src/components/task-detail/TaskDetailPage.tsx</files>
  <action>
1. Add `onNavigateToTask?: (taskId: string) => void` to TaskDetailPageProps interface
2. Pass callback to SubtaskAccordion:
   ```tsx
   <SubtaskAccordion
     parentTaskId={task.id}
     projectId={task.project_id}
     onNavigate={onNavigateToTask || (() => {})}
   />
   ```
3. Note: The actual navigation is handled by parent (App.tsx calling setView).
   If onNavigateToTask not provided, subtasks become non-navigable but still functional.
  </action>
  <verify>`npm run typecheck` passes</verify>
  <done>TaskDetailPage accepts onNavigateToTask and passes to SubtaskAccordion</done>
</task>

</tasks>

<verification>
- `npm run typecheck` passes
- Opening task detail shows subtasks collapsed (even if subtasks exist)
- Clicking subtask title triggers navigation callback
- Checkbox click still toggles done/todo status
- Edit icon (or double-click) still enables inline title editing
</verification>

<success_criteria>
- TASK-04: Subtasks clickable and navigate to subtask detail
- TASK-05: Subtasks minimized by default
</success_criteria>

<output>
After completion, create `.planning/phases/13-task-screen/13-02-SUMMARY.md`
</output>
